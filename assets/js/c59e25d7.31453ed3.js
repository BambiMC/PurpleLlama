"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[829],{8453:(e,n,a)=>{a.d(n,{R:()=>c,x:()=>l});var s=a(6540);const t={},i=s.createContext(t);function c(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(i.Provider,{value:n},e.children)}},9012:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>u,frontMatter:()=>c,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"documentation/getting-started/adding-custom-use-case","title":"Adding a Custom Use Case","description":"Introduction to Use Cases","source":"@site/docs/documentation/getting-started/adding-custom-use-case.md","sourceDirName":"documentation/getting-started","slug":"/documentation/getting-started/adding-custom-use-case","permalink":"/PurpleLlama/LlamaFirewall/docs/documentation/getting-started/adding-custom-use-case","draft":false,"unlisted":false,"editUrl":"https://github.com/meta-llama/PurpleLlama/tree/main/LlamaFirewall/website/docs/documentation/getting-started/adding-custom-use-case.md","tags":[],"version":"current","frontMatter":{},"sidebar":"documentationSidebar","previous":{"title":"How to use LlamaFirewall","permalink":"/PurpleLlama/LlamaFirewall/docs/documentation/getting-started/how-to-use-llamafirewall"},"next":{"title":"LlamaFirewall Architecture","permalink":"/PurpleLlama/LlamaFirewall/docs/documentation/llamafirewall-architecture/architecture"}}');var t=a(4848),i=a(8453);const c={},l="Adding a Custom Use Case",r={},o=[{value:"Introduction to Use Cases",id:"introduction-to-use-cases",level:3},{value:"Predefined Use Cases",id:"predefined-use-cases",level:3},{value:"Initialize LlamaFirewall with a Use Case",id:"initialize-llamafirewall-with-a-use-case",level:3},{value:"Defining an Additional Use Case",id:"defining-an-additional-use-case",level:3}];function d(e){const n={code:"code",h1:"h1",h3:"h3",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"adding-a-custom-use-case",children:"Adding a Custom Use Case"})}),"\n",(0,t.jsx)(n.h3,{id:"introduction-to-use-cases",children:"Introduction to Use Cases"}),"\n",(0,t.jsx)(n.p,{children:"In the context of this framework, a use case refers to a specific scenario where\nthe framework is intended to be used. Each use case may require different\nscanning layers and scanners to be configured in order to effectively detect and\nprevent potential security threats."}),"\n",(0,t.jsx)(n.h3,{id:"predefined-use-cases",children:"Predefined Use Cases"}),"\n",(0,t.jsxs)(n.p,{children:["LlamaFirewall comes with two predefined use cases that cater to specific\napplication scenarios. The ",(0,t.jsx)(n.code,{children:"CHAT_BOT"})," use case which focuses in protecting\nagainst prompt injection attacks. This is achieved by scanning for\n",(0,t.jsx)(n.code,{children:"PROMPT_INJECTION"})," attacks for both the ",(0,t.jsx)(n.code,{children:"USER"})," and ",(0,t.jsx)(n.code,{children:"SYSTEM"})," roles:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"UseCase.CHAT_BOT: {\n    Role.USER: [ScannerType.PROMPT_INJECTION],\n    Role.SYSTEM: [ScannerType.PROMPT_INJECTION],\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["On the other hand, the ",(0,t.jsx)(n.code,{children:"CODING_ASSISTANT"})," use case is designed for instances\nwhere there is a needs to protect against malicious code attacks. This is\nconveniently configured by setting a ScannerType.CODE_SHIELD for both the\n",(0,t.jsx)(n.code,{children:"ASSISTANT"})," and ",(0,t.jsx)(n.code,{children:"TOOL"})," roles:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"UseCase.CODING_ASSISTANT: {\n    Role.ASSISTANT: [ScannerType.CODE_SHIELD],\n    Role.TOOL: [ScannerType.CODE_SHIELD],\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"initialize-llamafirewall-with-a-use-case",children:"Initialize LlamaFirewall with a Use Case"}),"\n",(0,t.jsxs)(n.p,{children:["To initialize LlamaFirewall with a specific use case, you can use the\n",(0,t.jsx)(n.code,{children:"from_usecase"})," method. This method takes in a ",(0,t.jsx)(n.code,{children:"UseCase"})," enum value as an\nargument and returns an instance of LlamaFirewall configured with the\ncorresponding scanning layers and scanners. For example:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from security.llamafirewall_pre_oss.llamafirewall import LlamaFirewall, UseCase\n\n# Initialize LlamaFirewall with the code assistant use case\nllamafirewall = LlamaFirewall.from_usecase(UseCase.CODING_ASSISTANT)\n\n# Plug in an assistant and start scanning its input with LlamaFirewall\n# ...agent code...\nasync for output in agent.stream:\n    # Scan the output with LlamaFirewall\n    lf_result: ScanResult = await llamafirewall.scan_async(\n    Message(\n        role=Role.ASSISTANT,\n        content= output,\n    )\n    )\n\n    logging.info(f"Scan result: {lf_result}")\n    # continue processing the output...\n    yield output\n'})}),"\n",(0,t.jsx)(n.h3,{id:"defining-an-additional-use-case",children:"Defining an Additional Use Case"}),"\n",(0,t.jsxs)(n.p,{children:["To create an instance of LlamaFirewall with a custom use case, you can define an additional use case by adding it to the ",(0,t.jsx)(n.code,{children:"PREDEFINED_USE_CASES"})," dictionary. This allows you to specify the scanning layers and scanners that should be used for your particular use case."]}),"\n",(0,t.jsx)(n.p,{children:"For example, let's say you want to create a use case for a web application that requires additional scanning for a set of specific scanners you've customized. You could define this use case as follows:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from enum import Enum\n\nclass UseCase(Enum):\n    # ... existing use cases ...\n    WEB_APPLICATION = "web_application"\n\n# Define the scanning layers and scanners for the new use case\nPREDEFINED_USE_CASES[UseCase.WEB_APPLICATION] = {\n    Role.USER: [ScannerType.MY_MALICIOUS_UPLOADS_SCANNER],\n    Role.SYSTEM: [ScannerType.MY_MISALIGNMENT_SCANNER],\n    # ... additional scanning layers and scanners for your web application use case ...\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["With this additional use case defined, you can now create an instance of LlamaFirewall using the ",(0,t.jsx)(n.code,{children:"from_usecase"})," method:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"firewall = LlamaFirewall.from_usecase(UseCase.WEB_APPLICATION)\n"})}),"\n",(0,t.jsx)(n.p,{children:"This will easily provide you with a LlamaFirewall instance configured with the scanning layers and scanners you've specified for your web application use case."})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);